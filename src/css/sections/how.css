/* ================= HOW WE WORK â€” Flip Cards + Gallery ================= */

.how {
  background: #fff;
  padding-block: clamp(26px, 6vw, 40px);
}

.how__title {
  margin: clamp(18px, 3.5vw, 28px) 0 clamp(32px, 5vw, 56px);
  text-align: center;
  font-family: "Azeret Mono", monospace;
  font-size: clamp(36px, 6vw, 56px);
  letter-spacing: .06em;
  text-transform: uppercase;
  color: #111;
  font-synthesis: none;
}

.how__title span { font-weight: 100; }
.how__title strong { font-weight: 900; }

/* Grid of cards */
.how__cards {
  --cols: 4;
  display: grid;
  grid-template-columns: repeat(var(--cols), minmax(220px, 1fr));
  gap: clamp(12px, 2vw, 20px);
}

@media (max-width: 1100px) { .how__cards { --cols: 2; } }
@media (max-width: 560px)  { .how__cards { --cols: 1; } }

/* Card */
.how-card {
  perspective: 1000px;
  position: relative;
  isolation: isolate;
}

.how-card__btn {
  all: unset;
  display: block;
  width: 100%;
  cursor: pointer;
  border-radius: 18px;
  box-shadow: 0 6px 24px rgba(0,0,0,.06);
  background: transparent;
  outline: none;
}

.how-card__inner {
  position: relative;
  transform-style: preserve-3d;
  transition: transform .6s cubic-bezier(.2,.65,.2,1);
  min-height: clamp(220px, 36vw, 360px);
  border-radius: 18px;
  background: #fff;
}

.how-card__btn[aria-expanded="true"] .how-card__inner {
  transform: rotateY(180deg);
}

/* Faces */
.how-card__face {
  position: absolute;
  inset: 0;
  padding: clamp(16px, 2.5vw, 26px);
  border-radius: 18px;
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
  display: grid;
  align-content: center;
  gap: 10px;
}

/* Front */
.how-card__front {
  background: #fafafa;
  border: 1px solid #eee;
}

.how-card__kicker {
  font-family: "DM Mono", ui-monospace, monospace;
  letter-spacing: .06em;
  font-size: 14px;
  color: #888;
}

.how-card__title {
  font-family: "Fugaz One", system-ui, sans-serif;
  font-size: clamp(22px, 3vw, 30px);
  color: #111;
}

.how-card__hint {
  margin-top: 6px;
  font-family: "Fragment Mono", ui-monospace, monospace;
  font-size: 12px;
  color: #777;
}

/* Back */
.how-card__back {
  background: #111;
  color: #fff;
  transform: rotateY(180deg);
  border: 1px solid #111;
}

.how-card__desc {
  font-family: "Fragment Mono", ui-monospace, monospace;
  font-size: clamp(13px, 1.6vw, 15px);
  line-height: 1.7;
  letter-spacing: .01em;
  color: #f3f3f3;
}

.how-card__desc p + p { margin-top: 10px; }

.how-card__close {
  margin-top: 16px;
  justify-self: start;
  font-family: "DM Mono", ui-monospace, monospace;
  font-size: 12px;
  text-decoration: underline;
  color: #ddd;
}

/* Focus styles */
.how-card__btn:focus-visible {
  box-shadow: 0 0 0 3px #1113, 0 0 0 6px #00000018;
  border-radius: 22px;
}

/* Hover lift (desktop) */
@media (hover:hover) {
  .how-card__btn:hover .how-card__front {
    transform: translateY(-2px);
    transition: transform .25s ease;
  }
}

/* ================= Category Gallery (Masonry) ================= */

.how-gallery {
  margin-top: clamp(22px, 5vw, 36px);
  background: #fff;
}

.how-gallery__head {
  display: flex;
  align-items: baseline;
  justify-content: space-between;
  margin-bottom: clamp(8px, 2vw, 12px);
}

.how-gallery__title {
  font-family: "Azeret Mono", monospace;
  font-size: clamp(18px, 3vw, 22px);
  letter-spacing: .06em;
  color: #111;
  text-transform: uppercase;
}

.how-gallery__status {
  font-family: "DM Mono", ui-monospace, monospace;
  font-size: 12px;
  color: #888;
}

/* Masonry via CSS columns */
.how-gallery__grid {
  column-gap: 16px;
  column-count: 4;
}

@media (max-width: 1200px) { .how-gallery__grid { column-count: 3; } }
@media (max-width: 800px)  { .how-gallery__grid { column-count: 2; } }
@media (max-width: 520px)  { .how-gallery__grid { column-count: 1; } }

.how-gallery__item {
  break-inside: avoid;
  margin: 0 0 16px 0;
  border-radius: 12px;
  overflow: hidden;
  background: #f5f5f5;
  box-shadow: 0 4px 16px rgba(0,0,0,.06);
}

.how-gallery__img {
  width: 100%;
  height: auto;
  display: block;
}

/* tiny fade-in */
.how-gallery__img { opacity: 0; transition: opacity .3s ease; }
.how-gallery__img.is-loaded { opacity: 1; }